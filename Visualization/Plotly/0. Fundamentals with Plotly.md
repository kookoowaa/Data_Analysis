## 기본구조

- Plotly 패키지는 python 인터페이스에서 `plotly.js` JavaScipt를 활용하여 그래프를 생성
- 그래프 개채(figure)는 JSON 형태의 데이터를 기반으로 생성되게 됨
- 따라서 Plotly의 목적은 Python의 dictionary를 JSON 형태로 바꾸어 `plotly.js`가 활용할 수 있도록 돕는데 있음
- 자세한 레퍼런스는 https://plotly.com/python/에서 확인 가능



## JSON 구조

```python
fig = dict({
    "data": [{"type": "bar",
              "x": [1, 2, 3],
              "y": [1, 3, 2]}],
    "layout": {"title": {"text": "A Figure Specified By Python Dictionary"}}
})
```

- Plotly의 JSON은 `data` 키와, `layout`키로 구성되어 있음
- `data` 키는 그래프의 종류와, 그에 필요한 x, y 등의 데이터 값으로 구성되어 있음
- `layout` 키는 전반적인 그래프를 커스토마이징 하는데 필요한 정보가 담겨 있으며 상세한 [reference는 링크를 통해](https://plotly.com/python/reference/?_ga=2.80045591.1468543725.1590328902-1477425846.1589292567) 확인 가능



## Graph Objects

- Python dictionary 대신 "Graph Objects"(`import plotly.graph_objects as go`)라고 불리우는 계층형 클래스로 Figure를 구성하기도 함

- Graph Objects의 장점은 다음과 같음

  > 1. Data validation을 제공하고, 정확하지 않은 이름이나 key 값을 입력하면 exception을 반환
  > 2. Python docstrings를 제공하여 작업 환경에서 활용 가능
  > 3. Dictionary(fig["layout"])나 Class(fig.layout) 스타일로 호출 가능
  > 4. 편의 기능을 제공하여 이미 만들어진 figure를 수정하거나 업데이트 할 수 있음

- Graph Objects의 사용법은 다음과 같이 object를 사용하는 방식과 dictionary를 사용하는 방식 모두 병행할 수 있음

  ```python
  import plotly.graph_objects as go
  
  fig = go.Figure(
      data=[go.Bar(x=[1, 2, 3], y=[1, 3, 2])],
      layout=go.Layout(
          title=go.layout.Title(text="A Figure Specified By A Graph Object")
      )
  )
  
  
  ##################################################################################################
  
  dict_of_fig = dict({
      "data": [{"type": "bar",
                "x": [1, 2, 3],
                "y": [1, 3, 2]}],
      "layout": {"title": {"text": "A Figure Specified By A Graph Object With A Dictionary"}}
  })
  
  fig = go.Figure(dict_of_fig)
  ```

- 역으로 Graph Objects로부터 dictionary/JSON을 추출하는 것도 가능함

  ```python
  import plotly.graph_objects as go
  
  fig = go.Figure(
      data=[go.Bar(x=[1, 2, 3], y=[1, 3, 2])],
      layout=go.Layout(height=600, width=800)
  )
  
  fig.layout.template = None # to slim down the output
  
  print("Dictionary Representation of A Graph Object:\n\n" + str(fig.to_dict()))
  # {'data': [{'x': [1, 2, 3], 'y': [1, 3, 2], 'type': 'bar'}], 'layout': {'height': 600, 'width': 800}}
  
  print("JSON Representation of A Graph Object:\n\n" + str(fig.to_json()))
  # {"data":[{"type":"bar","x":[1,2,3],"y":[1,3,2]}],"layout":{"height":600,"width":800}}
  ```

## Plotly Express



